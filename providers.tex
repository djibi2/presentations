\section{Providers and Environments}

The OpenStack ecosystem is obviously far more diverse than the Amazon walled garden, and for that reason Heat has added features in the Havana release cycle aimed at making templates more portable across clouds.

The first issue to deal with is that users are at the mercy of their cloud providers for native (Python) resource type plugins. The Providers feature helps to mitigate that, by allowing users to effectively define their own resource types. Provider resources are simply constructed out of native resources and are expressed using the exact same template syntax as stacks. (In fact, they are implemented as stacks.)

Heat has also added environments, to make providers easier to consume. An environment allows the user to override parts of the template---for example, by specifying a provider template to implement a particular resource type. In the ideal scenario, an organisation could keep both a library of templates (one per application) and an orthogonal library of environments (one per cloud). By selecting the appropriate template and environment, any application could be launched on any cloud without modification.

For example, you may be deploying your application to an OpenStack cloud that features a DBaaS (and the appropriate Heat plugin for it), but testing on a local OpenStack installation with just the basics. You could define an environment for your test cloud that specifies that the DBaaS resource is supplied by a provider template containing a Nova server running MySQL. That allows you to test your application on your local cloud without DBaaS and still deploy the self same template to staging or production.

Providers are a powerful abstraction, and when they are available in the wild it is likely we will see more adventurous uses of them. You can supply a provider template to define a resource type even when a native plugin for that resource type exists. That allows you, for example, to create a provider template for a server resource that is specialised for a particular configuration management system or PaaS. Thus, in the main template you would only need to supply configuration data for your configuration management tool rather than configure the tool itself on every server.
