\section{Heat Templates}

\begin{marginfigure}
\include{example-template}
\caption{A simple example template that creates a Nova server and an attached Cinder volume. The user can specify the image to boot from and the name of the ssh public key to install on the server, and the IP address of the server is available as an output.}
\label{fig:example-template}
\end{marginfigure}

Heat templates usually take the form of simple \textsc{Yaml} documents. We chose this over \textsc{Json}, which CloudFormation uses, because it is much easier for humans to read and write---and a diff between two versions of a \textsc{Yaml} template is usually trivial to interpret. \textsc{Yaml} is a strict superset of \textsc{Json} though, so \textsc{Json} is still fully supported and templates can be converted between the two formats with no loss of fidelity.

Other than the serialisation format, Heat (for now) hews closely to the CloudFormation template model. (An example template is shown in Figure~\ref{fig:example-template}.) A template has four key elements:

\begin{itemize}
\item An optional \textsc{Parameters} section, which allows user-definable inputs to be specified.
\item An optional \textsc{Mappings} section, which allows key/value lookup of predefined constants.
\item A mandatory \textsc{Resources} section, which describes the resources and relationships which define the application, configuration and infrastructure.
\item An optional \textsc{Outputs} section, which describes the output values to be returned to the user.
\end{itemize}

All resources have a common interface:

\begin{itemize}
\item A number of optional or mandatory \textsc{Properties} which specify inputs that affect how the resource is configured.
\item A number of output attributes, which may be referenced elsewhere in the template using the \texttt{Fn::GetAtt} function.
\end{itemize}

One of the resource types available is a Heat stack, so multiple templates can be composed into hierarchical structures.

A resource may reference any other resource or its attributes, which causes Heat to infer an ordering dependency between them. The template may also specify explicit dependencies where necessary. Lifecycle operations\footnote{That is to say, operations such as creating, deleting or updating a stack.} occur in parallel to the maximum extent possible given the dependencies between resources.

A number of \textsc{Functions} are available which allow some limited manipulation of data within the template, for example to combine parameter data with static data in the template.
